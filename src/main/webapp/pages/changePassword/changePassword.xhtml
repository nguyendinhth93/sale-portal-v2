<ui:composition
        template="/templates/template.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:p="http://primefaces.org/ui"
        xmlns:sn="http://java.sun.com/jsf/composite/tags"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="title" >#{lang['chang.password.title.lbl']}</ui:define>
    <ui:define name="content">
        <div class="card card-w-title">
            <h1>#{lang['chang.password.title.lbl']}</h1>
            <h:form id="form">
                <p:outputPanel id="changePasswordForm" class="card card-w-title">
                    <h4 class="headerPanel"><span>#{lang['chang.password.title.lbl']}</span></h4>
                    <p:growl showDetail="true" life="7000" globalOnly="true" autoUpdate="true" severity="error, info"/>
                    <div class="ui-g ui-fluid">
                        <div class="ui-g-12">
                            <p:panelGrid columns="4"
                                         layout="grid"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                         styleClass="ui-panelgrid-blank form-group"
                                         style="border:0px none; background-color:transparent;">

                                <p:outputLabel value="#{lang['chang.password.username.lbl']}" />
                                <p:outputLabel value="#{changePasswordController.currentUserDTO.userName}" />

                                <p:outputLabel value="#{lang['chang.password.old.password.lbl']}" />
                                <p:password maxlength="50" converter="stringTrimmer"
                                            required="true" requiredMessage="#{lang['common.confirm.mess.req']}"
                                            value="#{changePasswordController.oldPassword}"/>

                                <p:outputLabel value="#{lang['chang.password.new.password.lbl']}" />
                                <p:password maxlength="50" converter="stringTrimmer"
                                            required="true" requiredMessage="#{lang['common.confirm.mess.req']}"
                                            value="#{changePasswordController.newPassword}"/>

                                <p:outputLabel value="#{lang['chang.password.new.password.confirm.lbl']}" />
                                <p:password maxlength="50" converter="stringTrimmer"
                                            required="true" requiredMessage="#{lang['common.confirm.mess.req']}"
                                            value="#{changePasswordController.confirrmNewPassword}"/>
                            </p:panelGrid>
                        </div>
                    </div>
                    <div style="margin-top: 20px;" class="al-center">
                        <sn:confirmDialog
                                idComponent="btnSave"
                                valueButton="#{lang['common.btn.change.password']}"
                                headerConfirm="#{lang['common.confirm.header']}"
                                messageConfirm="#{lang['common.confirm.message']}"
                                actionOK="#{changePasswordController.saveOrUpdate}"
                                actionValidate="#{changePasswordController.validateBeforeSave}"
                                iconButton="ui-icon-save"
                                updateArea="@([id$=changePasswordForm])"
                                updateOK="@([id$=changePasswordForm])"
                                process="@this, @([id$=changePasswordForm])"
                                styleButton="margin-right: 5px"
                                focusCancel="false"
                                isButton="true"/>
                        <p:commandButton value="#{lang['common.button.rework']}" update="@([id$=changePasswordForm])"
                                action="#{changePasswordController.reWork}"
                                process="@this" icon="ui-icon-refresh" style="margin-right: 5px"/>
                    </div>
                </p:outputPanel>
            </h:form>
        </div>
    </ui:define>
</ui:composition>
